<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1">

<html lang="en">

    <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Executing “daxctl offline-memory daxX.Y” returns “Failed to offline” | kb.pmem.io</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Executing “daxctl offline-memory daxX.Y” returns “Failed to offline”" />
<meta name="author" content="Steve Scargall" />
<meta property="og:locale" content="en" />
<meta name="description" content="Applies To Linux Linux Kernel v5.1 or later daxctl utility DAX System-RAM Feature Issue When attempting to offline a ‘system-ram’ device, daxctl returns an error similar to the following: # daxctl offline-memory dax0.0 libdaxctl: offline_one_memblock: dax0.0: Failed to offline /sys/devices/system/node/node2/memory851/state: Device or resource busy dax0.0: failed to offline memory: Device or resource busy error offlining memory: Device or resource busy Cause One or more processes are using memory from the system-ram device, causing the ‘Device or resource busy’ error. Solution Use the fuser command to confirm if any processes are using the /dev/daxX.Y device. The following example shows many processes are still using the dax device: # fuser -c /dev/dax0.0 /dev/dax0.0: 1 491rc 1576 1598 1914 2232 2234 2262 2267 2271 2272 2276 2277 2278 2281 2282 2290 2298 2308 2351 2369 2370 2371 2671 2674 2692 2695 2697 2698 2707 2981 2982 10018 10023 10025 10030 // Display process and owner # fuser -cu /dev/dax0.0 /dev/dax0.0: 1(root) 491rc(root) 1576(root) 1598(root) 1914(root) 2232(root) 2234(root) 2262(root) 2267(root) 2271(root) 2272(root) 2276(root) 2277(root) 2278(root) 2281(root) 2282(root) 2290(dbus) 2298(root) 2308(dbus) 2351(polkitd) 2369(root) 2370(root) 2371(root) 2671(root) 2674(root) 2692(root) 2695(tomcat) 2697(root) 2698(root) 2707(root) 2981(dnsmasq) 2982(root) 10018(root) 10023(root) 10025(root) 10030(root) Stop the application processes and try again, or schedule a system reboot." />
<meta property="og:description" content="Applies To Linux Linux Kernel v5.1 or later daxctl utility DAX System-RAM Feature Issue When attempting to offline a ‘system-ram’ device, daxctl returns an error similar to the following: # daxctl offline-memory dax0.0 libdaxctl: offline_one_memblock: dax0.0: Failed to offline /sys/devices/system/node/node2/memory851/state: Device or resource busy dax0.0: failed to offline memory: Device or resource busy error offlining memory: Device or resource busy Cause One or more processes are using memory from the system-ram device, causing the ‘Device or resource busy’ error. Solution Use the fuser command to confirm if any processes are using the /dev/daxX.Y device. The following example shows many processes are still using the dax device: # fuser -c /dev/dax0.0 /dev/dax0.0: 1 491rc 1576 1598 1914 2232 2234 2262 2267 2271 2272 2276 2277 2278 2281 2282 2290 2298 2308 2351 2369 2370 2371 2671 2674 2692 2695 2697 2698 2707 2981 2982 10018 10023 10025 10030 // Display process and owner # fuser -cu /dev/dax0.0 /dev/dax0.0: 1(root) 491rc(root) 1576(root) 1598(root) 1914(root) 2232(root) 2234(root) 2262(root) 2267(root) 2271(root) 2272(root) 2276(root) 2277(root) 2278(root) 2281(root) 2282(root) 2290(dbus) 2298(root) 2308(dbus) 2351(polkitd) 2369(root) 2370(root) 2371(root) 2671(root) 2674(root) 2692(root) 2695(tomcat) 2697(root) 2698(root) 2707(root) 2981(dnsmasq) 2982(root) 10018(root) 10023(root) 10025(root) 10030(root) Stop the application processes and try again, or schedule a system reboot." />
<link rel="canonical" href="https://kb.pmem.io/problem/100000026-Executing-daxctl-offline-memory-daxX.Yreturns-Failed-to-offline/" />
<meta property="og:url" content="https://kb.pmem.io/problem/100000026-Executing-daxctl-offline-memory-daxX.Yreturns-Failed-to-offline/" />
<meta property="og:site_name" content="kb.pmem.io" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-04-09T23:54:42+00:00" />
<script type="application/ld+json">
{"dateModified":"2020-04-09T23:54:42+00:00","datePublished":"2020-04-09T23:54:42+00:00","description":"Applies To Linux Linux Kernel v5.1 or later daxctl utility DAX System-RAM Feature Issue When attempting to offline a ‘system-ram’ device, daxctl returns an error similar to the following: # daxctl offline-memory dax0.0 libdaxctl: offline_one_memblock: dax0.0: Failed to offline /sys/devices/system/node/node2/memory851/state: Device or resource busy dax0.0: failed to offline memory: Device or resource busy error offlining memory: Device or resource busy Cause One or more processes are using memory from the system-ram device, causing the ‘Device or resource busy’ error. Solution Use the fuser command to confirm if any processes are using the /dev/daxX.Y device. The following example shows many processes are still using the dax device: # fuser -c /dev/dax0.0 /dev/dax0.0: 1 491rc 1576 1598 1914 2232 2234 2262 2267 2271 2272 2276 2277 2278 2281 2282 2290 2298 2308 2351 2369 2370 2371 2671 2674 2692 2695 2697 2698 2707 2981 2982 10018 10023 10025 10030 // Display process and owner # fuser -cu /dev/dax0.0 /dev/dax0.0: 1(root) 491rc(root) 1576(root) 1598(root) 1914(root) 2232(root) 2234(root) 2262(root) 2267(root) 2271(root) 2272(root) 2276(root) 2277(root) 2278(root) 2281(root) 2282(root) 2290(dbus) 2298(root) 2308(dbus) 2351(polkitd) 2369(root) 2370(root) 2371(root) 2671(root) 2674(root) 2692(root) 2695(tomcat) 2697(root) 2698(root) 2707(root) 2981(dnsmasq) 2982(root) 10018(root) 10023(root) 10025(root) 10030(root) Stop the application processes and try again, or schedule a system reboot.","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://kb.pmem.io/problem/100000026-Executing-daxctl-offline-memory-daxX.Yreturns-Failed-to-offline/"},"author":{"@type":"Person","name":"Steve Scargall"},"url":"https://kb.pmem.io/problem/100000026-Executing-daxctl-offline-memory-daxX.Yreturns-Failed-to-offline/","headline":"Executing “daxctl offline-memory daxX.Y” returns “Failed to offline”","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="shortcut icon" type="image/png" href="/uploads/favicon.png" >
  <link rel="alternate" type="application/rss+xml" title="kb.pmem.io" href="/feed.xml">
  <script src="/assets/js/main.js"></script>
  
  
</head>


    <body>

    
        <div data-uk-sticky="animation: uk-animation-slide-top; sel-target: .uk-navbar-container; cls-active: uk-navbar-sticky; cls-inactive: uk-navbar-transparent; top: 200">
    <nav class="uk-navbar-container">
        <div class="uk-container">
            <div data-uk-navbar>
                <div class="uk-navbar-left">
                    <a class="uk-navbar-item uk-logo uk-visible@m" href="/">kb.pmem.io</a>
                    
                        <a class="uk-navbar-toggle uk-hidden@m" href="#offcanvas-docs" data-uk-toggle><span data-uk-navbar-toggle-icon></span> <span class="uk-margin-small-left">Docs</span></a>
                    

                    <ul class="uk-navbar-nav uk-visible@m">
                        
                            
                            
                            
                                
                                    
                                        <li><a href="/" >Home</a></li>
                                                                                                        
                                
                            
                        
                            
                            
                            
                                
                                    
                                        <li><a href="#">Knowledge Base</a>
                                        
                                            <div class="uk-navbar-dropdown">
                                                <ul class="uk-nav uk-navbar-dropdown-nav">
                                                    
                                                    
                                                        
                                                        
                                                        <li><a href="/development/">Development</a></li>
                                                    
                                                    
                                                    
                                                        
                                                        
                                                        <li><a href="/problem/">Problem Resolution</a></li>
                                                    
                                                    
                                                    
                                                        
                                                        
                                                        <li><a href="/howto/">How To</a></li>
                                                    
                                                    
                                                    
                                                        
                                                        
                                                        <li><a href="/faq/">Frequently Asked Questions</a></li>
                                                    
                                                    
                                                    
                                                        
                                                        
                                                        <li><a href="/apps/">Applications</a></li>
                                                    
                                                    
                                                </ul>
                                            </div>
                                        
                                        </li>
                                                                                                        
                                
                            
                        
                            
                            
                            
                                
                                    
                                        <li><a href="https://docs.pmem.io/" target="_blank" >Documentation</a></li>
                                                                                                        
                                
                            
                        
                            
                            
                            
                                
                                    
                                        <li><a href="https://pmem.io/blog/" target="_blank" >Blog</a></li>
                                                                                                        
                                
                            
                        
                    </ul>
                </div>
                <div class="uk-navbar-center uk-hidden@m">
                    <a class="uk-navbar-item uk-logo" href="/">kb.pmem.io</a>
                </div>
                <div class="uk-navbar-right">
                    
                        
                            <div>
				<script async src="https://cse.google.com/cse.js?cx=013996151090288251857:odeztdey5mo"></script>
				<a class="uk-navbar-toggle" uk-search-icon href="#"></a>
            			<div class="uk-drop" uk-drop="mode: click; pos: left-center; offset: 0">
                	  	    <form method="GET" action="/search" class="uk-search uk-search-navbar uk-width-1-1">
                    			<input id="minisearch" name="q" class="uk-search-input uk-border-radius-vlarge uk-box-shadow-medium gcse-searchbox-only" type="search" placeholder="Search..." autofocus>
                		    </form>
            			</div>
                            </div>
                        
                    

                    <ul class="uk-navbar-nav uk-visible@m">
                        
                    </ul>

                    
                        <a class="uk-navbar-toggle uk-hidden@m" href="#offcanvas" data-uk-toggle><span data-uk-navbar-toggle-icon></span> <span class="uk-margin-small-left">Menu</span></a>
                    

                </div>
            </div>
        </div>
    </nav>
</div>

    

    <div class="uk-section">
    <div class="uk-container">
        <article class="uk-article">

            <h1 class="uk-article-title">Executing &quot;daxctl offline-memory daxX.Y&quot; returns &quot;Failed to offline&quot;</h1>

            <div class="article-content link-primary">
                <h1 id="applies-to">Applies To</h1>

<ul>
  <li>Linux</li>
  <li>Linux Kernel v5.1 or later</li>
  <li>daxctl utility</li>
  <li>DAX System-RAM Feature</li>
</ul>

<h1 id="issue">Issue</h1>

<p>When attempting to offline a ‘system-ram’ device, daxctl returns an error similar to the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># daxctl offline-memory dax0.0
libdaxctl: offline_one_memblock: dax0.0: Failed to offline /sys/devices/system/node/node2/memory851/state: Device or resource busy
dax0.0: failed to offline memory: Device or resource busy
error offlining memory: Device or resource busy
</code></pre></div></div>

<h1 id="cause">Cause</h1>

<p>One or more processes are using memory from the system-ram device, causing the ‘Device or resource busy’ error.</p>

<h1 id="solution">Solution</h1>

<p>Use the <code class="language-plaintext highlighter-rouge">fuser</code> command to confirm if any processes are using the /dev/daxX.Y device. The following example shows many processes are still using the dax device:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># fuser -c /dev/dax0.0
/dev/dax0.0:             1   491rc  1576  1598  1914  2232  2234  2262  2267  2271  2272  2276  2277  2278  2281  2282  2290  2298  2308  2351  2369  2370  2371  2671  2674  2692  2695  2697  2698  2707  2981  2982 10018 10023 10025 10030

// Display process and owner
# fuser -cu /dev/dax0.0
/dev/dax0.0:             1(root)   491rc(root)  1576(root)  1598(root)  1914(root)  2232(root)  2234(root)  2262(root)  2267(root)  2271(root)  2272(root)  2276(root)  2277(root)  2278(root)  2281(root)  2282(root)  2290(dbus)  2298(root)  2308(dbus)  2351(polkitd)  2369(root)  2370(root)  2371(root)  2671(root)  2674(root)  2692(root)  2695(tomcat)  2697(root)  2698(root)  2707(root)  2981(dnsmasq)  2982(root) 10018(root) 10023(root) 10025(root) 10030(root)

</code></pre></div></div>

<p>Stop the application processes and try again, or schedule a system reboot.</p>


            </div>

	    <div class="article-meta">
	        <h5>Disclaimer</h5>
<div class="disclaimer" id="disclaimer">
  <p> This Support Knowledgebase provides a valuable tool for parties interested in persistent memory products and solutions to acquire information, ideas and learn from one another. Materials are provided for informational, personal, commerical, and non-commercial use and are presented "AS IS" WITHOUT WARRANTY OF ANY KIND.
</div>



<h5>Document ID</h5>
100000026



<h5>Creation Date</h5>
09 Apr 2020




	    </div>
        </article>
    </div>
</div>

<!-- Footer -->
<footer class="uk-section uk-text-center uk-text-muted">
    <div class="uk-container uk-container-small">

	<!-- Site navigation links -->
        <div>
            <ul class="uk-subnav uk-flex-center">
                
            </ul>
        </div>
	<!-- Social Media Links -->
        <div class="uk-margin-medium">
            <div data-uk-grid class="uk-child-width-auto uk-grid-small uk-flex-center uk-grid">
                













            </div>
        </div>
	<!-- Copyright notice -->
        <div class="uk-margin-medium uk-text-small copyright link-secondary">
	    Copyright&copy; kb.pmem.io 2020. All rights reserved.
	    <!--  -->
	</div>

    </div>
</footer>
<!-- End of Footer -->





    <div id="offcanvas-docs" data-uk-offcanvas="overlay: true">
    <div class="uk-offcanvas-bar">

        <button class="uk-offcanvas-close" type="button" data-uk-close></button>

        
        <h5 class="uk-margin-top">Getting Started</h5>
        <ul class="uk-nav uk-nav-default doc-nav">
        
          
          
          <li class=""><a href="/docs/installation/">Theme installation</a></li>
        
          
          
          <li class=""><a href="/docs/setup/">Basic theme setup</a></li>
        
          
          
          <li class=""><a href="/docs/navigation/">Navigation bar</a></li>
        
          
          
          <li class=""><a href="/docs/footer/">Footer options</a></li>
        
          
          
          <li class=""><a href="/docs/posts/">Creating your first post in Jekyll</a></li>
        
          
          
          <li class=""><a href="/docs/docs/">Creating docs posts</a></li>
        
          
          
          <li class=""><a href="/docs/comments/">Enabling comments (via Disqus)</a></li>
        
          
          
          <li class=""><a href="/docs/analytics/">Google Analytics</a></li>
        
        </ul>
        
        <h5 class="uk-margin-top">Theme Features</h5>
        <ul class="uk-nav uk-nav-default doc-nav">
        
          
          
          <li class=""><a href="/docs/hero/">Hero page header</a></li>
        
          
          
          <li class=""><a href="/docs/boxes/">Category boxes section</a></li>
        
          
          
          <li class=""><a href="/docs/featured/">Fearured docs section</a></li>
        
          
          
          <li class=""><a href="/docs/videos/">Video lightbox boxes section</a></li>
        
          
          
          <li class=""><a href="/docs/faq/">Frequently asked questions section</a></li>
        
          
          
          <li class=""><a href="/docs/team/">Team members section</a></li>
        
          
          
          <li class=""><a href="/docs/cta/">Call to action section</a></li>
        
          
          
          <li class=""><a href="/docs/changelog/">Creating a changelog</a></li>
        
          
          
          <li class=""><a href="/docs/contact/">Contact form (via FormSpree)</a></li>
        
          
          
          <li class=""><a href="/docs/media/">Adding media to post and doc content</a></li>
        
          
          
          <li class=""><a href="/docs/toc/">Adding table of contents to docs</a></li>
        
          
          
          <li class=""><a href="/docs/alerts/">Adding alerts to content</a></li>
        
        </ul>
        
        <h5 class="uk-margin-top">Customization</h5>
        <ul class="uk-nav uk-nav-default doc-nav">
        
          
          
          <li class=""><a href="/docs/translation/">Translation</a></li>
        
          
          
          <li class=""><a href="/docs/customize/">Customization</a></li>
        
          
          
          <li class=""><a href="/docs/development/">Development</a></li>
        
          
          
          <li class=""><a href="/docs/sources/">Sources and credits</a></li>
        
        </ul>
        
        <h5 class="uk-margin-top">Help</h5>
        <ul class="uk-nav uk-nav-default doc-nav">
        
          
          
          <li class=""><a href="/docs/support/">Contacting support</a></li>
        
        </ul>
        

    </div>
</div>


    <div id="offcanvas" data-uk-offcanvas="flip: true; overlay: true">
    <div class="uk-offcanvas-bar">

        <a class="uk-logo uk-margin-small-bottom" href="/">kb.pmem.io</a>
     
        <button class="uk-offcanvas-close" type="button" data-uk-close></button>
      
        <ul class="uk-nav uk-nav-primary uk-margin-top">
            
                

                

                
                    <li><a href="/" >Home</a></li>
                
            
                

                

                
                    <li><a href="" >Knowledge Base</a></li>
                
            
                

                

                
                    <li><a href="https://docs.pmem.io/" target="_blank" >Docs</a></li>
                
            
                

                

                
                    <li><a href="https://pmem.io/blog/" target="_blank" >Blog</a></li>
                
            
        </ul>

        <div class="uk-margin-top uk-text-center">
            <div data-uk-grid class="uk-child-width-auto uk-grid-small uk-flex-center uk-grid">
                













            </div>
        </div>

    </div>
</div>


    

    
        
    

    

    </body>

</html>
